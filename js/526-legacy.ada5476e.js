(self["webpackChunkegu2022"]=self["webpackChunkegu2022"]||[]).push([[526],{22526:function(e,t,n){"use strict";n.r(t);var r=n(44389),o=n.n(r),s=n(29846),c=n.n(s),i=n(27344),a=n.n(i),d=n(81474),u=n.n(d),l=n(40683),f=n.n(l),h=n(42641),g=n(52499),p=n.n(g);t["default"]={transport:[o(),c(),a(),p()],connectionEncryption:[new h.Noise],peerDiscovery:[u()],dht:f()}},37845:function(e,t){"use strict";t.toString=function(e){switch(e){case 1:return"IN";case 2:return"CS";case 3:return"CH";case 4:return"HS";case 255:return"ANY"}return"UNKNOWN_"+e},t.toClass=function(e){switch(e.toUpperCase()){case"IN":return 1;case"CS":return 2;case"CH":return 3;case"HS":return 4;case"ANY":return 255}return 0}},64568:function(e,t,n){"use strict";const r=n(48764).Buffer,o=n(9082),s=n(46017),c=n(76942),i=n(37845),a=n(96285),d=n(69526),u=0,l=32768,f=32768,h=~f,g=32768,p=~g,y=t.name={};y.encode=function(e,t,n){t||(t=r.alloc(y.encodingLength(e))),n||(n=0);const o=n,s=e.replace(/^\.|\.$/gm,"");if(s.length){const e=s.split(".");for(let r=0;r<e.length;r++){const o=t.write(e[r],n+1);t[n]=o,n+=o+1}}return t[n++]=0,y.encode.bytes=n-o,t},y.encode.bytes=0,y.decode=function(e,t){t||(t=0);const n=[];let r=t,o=0,s=0,c=!1;while(1){if(t>=e.length)throw new Error("Cannot decode name (buffer overflow)");const i=e[t++];if(s+=c?0:1,0===i)break;if(0===(192&i)){if(t+i>e.length)throw new Error("Cannot decode name (buffer overflow)");if(o+=i+1,o>254)throw new Error("Cannot decode name (name too long)");n.push(e.toString("utf-8",t,t+i)),t+=i,s+=c?0:i}else{if(192!==(192&i))throw new Error("Cannot decode name (bad label)");{if(t+1>e.length)throw new Error("Cannot decode name (buffer overflow)");const n=e.readUInt16BE(t-1)-49152;if(n>=r)throw new Error("Cannot decode name (bad pointer)");t=n,r=n,s+=c?0:1,c=!0}}}return y.decode.bytes=s,0===n.length?".":n.join(".")},y.decode.bytes=0,y.encodingLength=function(e){return"."===e||".."===e?1:r.byteLength(e.replace(/^\.|\.$/gm,""))+2};const E={encode:function(e,t,n){t||(t=r.alloc(E.encodingLength(e))),n||(n=0);const o=t.write(e,n+1);return t[n]=o,E.encode.bytes=o+1,t}};E.encode.bytes=0,E.decode=function(e,t){t||(t=0);const n=e[t],r=e.toString("utf-8",t+1,t+1+n);return E.decode.bytes=n+1,r},E.decode.bytes=0,E.encodingLength=function(e){return r.byteLength(e)+1};const I={encode:function(e,t,n){t||(t=I.encodingLength(e)),n||(n=0);const r=32767&(e.flags||0),o="response"===e.type?l:u;return t.writeUInt16BE(e.id||0,n),t.writeUInt16BE(r|o,n+2),t.writeUInt16BE(e.questions.length,n+4),t.writeUInt16BE(e.answers.length,n+6),t.writeUInt16BE(e.authorities.length,n+8),t.writeUInt16BE(e.additionals.length,n+10),t}};I.encode.bytes=12,I.decode=function(e,t){if(t||(t=0),e.length<12)throw new Error("Header must be 12 bytes");const n=e.readUInt16BE(t+2);return{id:e.readUInt16BE(t),type:n&l?"response":"query",flags:32767&n,flag_qr:1===(n>>15&1),opcode:c.toString(n>>11&15),flag_aa:1===(n>>10&1),flag_tc:1===(n>>9&1),flag_rd:1===(n>>8&1),flag_ra:1===(n>>7&1),flag_z:1===(n>>6&1),flag_ad:1===(n>>5&1),flag_cd:1===(n>>4&1),rcode:s.toString(15&n),questions:new Array(e.readUInt16BE(t+4)),answers:new Array(e.readUInt16BE(t+6)),authorities:new Array(e.readUInt16BE(t+8)),additionals:new Array(e.readUInt16BE(t+10))}},I.decode.bytes=12,I.encodingLength=function(){return 12};const m=t.unknown={};m.encode=function(e,t,n){return t||(t=r.alloc(m.encodingLength(e))),n||(n=0),t.writeUInt16BE(e.length,n),e.copy(t,n+2),m.encode.bytes=e.length+2,t},m.encode.bytes=0,m.decode=function(e,t){t||(t=0);const n=e.readUInt16BE(t),r=e.slice(t+2,t+2+n);return m.decode.bytes=n+2,r},m.decode.bytes=0,m.encodingLength=function(e){return e.length+2};const b=t.ns={};b.encode=function(e,t,n){return t||(t=r.alloc(b.encodingLength(e))),n||(n=0),y.encode(e,t,n+2),t.writeUInt16BE(y.encode.bytes,n),b.encode.bytes=y.encode.bytes+2,t},b.encode.bytes=0,b.decode=function(e,t){t||(t=0);const n=e.readUInt16BE(t),r=y.decode(e,t+2);return b.decode.bytes=n+2,r},b.decode.bytes=0,b.encodingLength=function(e){return y.encodingLength(e)+2};const w=t.soa={};w.encode=function(e,t,n){t||(t=r.alloc(w.encodingLength(e))),n||(n=0);const o=n;return n+=2,y.encode(e.mname,t,n),n+=y.encode.bytes,y.encode(e.rname,t,n),n+=y.encode.bytes,t.writeUInt32BE(e.serial||0,n),n+=4,t.writeUInt32BE(e.refresh||0,n),n+=4,t.writeUInt32BE(e.retry||0,n),n+=4,t.writeUInt32BE(e.expire||0,n),n+=4,t.writeUInt32BE(e.minimum||0,n),n+=4,t.writeUInt16BE(n-o-2,o),w.encode.bytes=n-o,t},w.encode.bytes=0,w.decode=function(e,t){t||(t=0);const n=t,r={};return t+=2,r.mname=y.decode(e,t),t+=y.decode.bytes,r.rname=y.decode(e,t),t+=y.decode.bytes,r.serial=e.readUInt32BE(t),t+=4,r.refresh=e.readUInt32BE(t),t+=4,r.retry=e.readUInt32BE(t),t+=4,r.expire=e.readUInt32BE(t),t+=4,r.minimum=e.readUInt32BE(t),t+=4,w.decode.bytes=t-n,r},w.decode.bytes=0,w.encodingLength=function(e){return 22+y.encodingLength(e.mname)+y.encodingLength(e.rname)};const U=t.txt={};U.encode=function(e,t,n){Array.isArray(e)||(e=[e]);for(let s=0;s<e.length;s++)if("string"===typeof e[s]&&(e[s]=r.from(e[s])),!r.isBuffer(e[s]))throw new Error("Must be a Buffer");t||(t=r.alloc(U.encodingLength(e))),n||(n=0);const o=n;return n+=2,e.forEach((function(e){t[n++]=e.length,e.copy(t,n,0,e.length),n+=e.length})),t.writeUInt16BE(n-o-2,o),U.encode.bytes=n-o,t},U.encode.bytes=0,U.decode=function(e,t){t||(t=0);const n=t;let r=e.readUInt16BE(t);t+=2;let o=[];while(r>0){const n=e[t++];if(--r,r<n)throw new Error("Buffer overflow");o.push(e.slice(t,t+n)),t+=n,r-=n}return U.decode.bytes=t-n,o},U.decode.bytes=0,U.encodingLength=function(e){Array.isArray(e)||(e=[e]);let t=2;return e.forEach((function(e){t+="string"===typeof e?r.byteLength(e)+1:e.length+1})),t};const _=t["null"]={};_.encode=function(e,t,n){t||(t=r.alloc(_.encodingLength(e))),n||(n=0),"string"===typeof e&&(e=r.from(e)),e||(e=r.alloc(0));const o=n;n+=2;const s=e.length;return e.copy(t,n,0,s),n+=s,t.writeUInt16BE(n-o-2,o),_.encode.bytes=n-o,t},_.encode.bytes=0,_.decode=function(e,t){t||(t=0);const n=t,r=e.readUInt16BE(t);t+=2;const o=e.slice(t,t+r);return t+=r,_.decode.bytes=t-n,o},_.decode.bytes=0,_.encodingLength=function(e){return e?(r.isBuffer(e)?e.length:r.byteLength(e))+2:2};const A=t.hinfo={};A.encode=function(e,t,n){t||(t=r.alloc(A.encodingLength(e))),n||(n=0);const o=n;return n+=2,E.encode(e.cpu,t,n),n+=E.encode.bytes,E.encode(e.os,t,n),n+=E.encode.bytes,t.writeUInt16BE(n-o-2,o),A.encode.bytes=n-o,t},A.encode.bytes=0,A.decode=function(e,t){t||(t=0);const n=t,r={};return t+=2,r.cpu=E.decode(e,t),t+=E.decode.bytes,r.os=E.decode(e,t),t+=E.decode.bytes,A.decode.bytes=t-n,r},A.decode.bytes=0,A.encodingLength=function(e){return E.encodingLength(e.cpu)+E.encodingLength(e.os)+2};const L=t.ptr={},T=t.cname=L,C=t.dname=L;L.encode=function(e,t,n){return t||(t=r.alloc(L.encodingLength(e))),n||(n=0),y.encode(e,t,n+2),t.writeUInt16BE(y.encode.bytes,n),L.encode.bytes=y.encode.bytes+2,t},L.encode.bytes=0,L.decode=function(e,t){t||(t=0);const n=y.decode(e,t+2);return L.decode.bytes=y.decode.bytes+2,n},L.decode.bytes=0,L.encodingLength=function(e){return y.encodingLength(e)+2};const O=t.srv={};O.encode=function(e,t,n){t||(t=r.alloc(O.encodingLength(e))),n||(n=0),t.writeUInt16BE(e.priority||0,n+2),t.writeUInt16BE(e.weight||0,n+4),t.writeUInt16BE(e.port||0,n+6),y.encode(e.target,t,n+8);const o=y.encode.bytes+6;return t.writeUInt16BE(o,n),O.encode.bytes=o+2,t},O.encode.bytes=0,O.decode=function(e,t){t||(t=0);const n=e.readUInt16BE(t),r={};return r.priority=e.readUInt16BE(t+2),r.weight=e.readUInt16BE(t+4),r.port=e.readUInt16BE(t+6),r.target=y.decode(e,t+8),O.decode.bytes=n+2,r},O.decode.bytes=0,O.encodingLength=function(e){return 8+y.encodingLength(e.target)};const S=t.caa={};S.ISSUER_CRITICAL=128,S.encode=function(e,t,n){const o=S.encodingLength(e);return t||(t=r.alloc(S.encodingLength(e))),n||(n=0),e.issuerCritical&&(e.flags=S.ISSUER_CRITICAL),t.writeUInt16BE(o-2,n),n+=2,t.writeUInt8(e.flags||0,n),n+=1,E.encode(e.tag,t,n),n+=E.encode.bytes,t.write(e.value,n),n+=r.byteLength(e.value),S.encode.bytes=o,t},S.encode.bytes=0,S.decode=function(e,t){t||(t=0);const n=e.readUInt16BE(t);t+=2;const r=t,o={};return o.flags=e.readUInt8(t),t+=1,o.tag=E.decode(e,t),t+=E.decode.bytes,o.value=e.toString("utf-8",t,r+n),o.issuerCritical=!!(o.flags&S.ISSUER_CRITICAL),S.decode.bytes=n+2,o},S.decode.bytes=0,S.encodingLength=function(e){return E.encodingLength(e.tag)+E.encodingLength(e.value)+2};const B=t.mx={};B.encode=function(e,t,n){t||(t=r.alloc(B.encodingLength(e))),n||(n=0);const o=n;return n+=2,t.writeUInt16BE(e.preference||0,n),n+=2,y.encode(e.exchange,t,n),n+=y.encode.bytes,t.writeUInt16BE(n-o-2,o),B.encode.bytes=n-o,t},B.encode.bytes=0,B.decode=function(e,t){t||(t=0);const n=t,r={};return t+=2,r.preference=e.readUInt16BE(t),t+=2,r.exchange=y.decode(e,t),t+=y.decode.bytes,B.decode.bytes=t-n,r},B.encodingLength=function(e){return 4+y.encodingLength(e.exchange)};const v=t.a={};v.encode=function(e,t,n){return t||(t=r.alloc(v.encodingLength(e))),n||(n=0),t.writeUInt16BE(4,n),n+=2,d.v4.encode(e,t,n),v.encode.bytes=6,t},v.encode.bytes=0,v.decode=function(e,t){t||(t=0),t+=2;const n=d.v4.decode(e,t);return v.decode.bytes=6,n},v.decode.bytes=0,v.encodingLength=function(){return 6};const P=t.aaaa={};P.encode=function(e,t,n){return t||(t=r.alloc(P.encodingLength(e))),n||(n=0),t.writeUInt16BE(16,n),n+=2,d.v6.encode(e,t,n),P.encode.bytes=18,t},P.encode.bytes=0,P.decode=function(e,t){t||(t=0),t+=2;const n=d.v6.decode(e,t);return P.decode.bytes=18,n},P.decode.bytes=0,P.encodingLength=function(){return 18};const N=t.option={};N.encode=function(e,t,n){t||(t=r.alloc(N.encodingLength(e))),n||(n=0);const o=n,s=a.toCode(e.code);if(t.writeUInt16BE(s,n),n+=2,e.data)t.writeUInt16BE(e.data.length,n),n+=2,e.data.copy(t,n),n+=e.data.length;else switch(s){case 8:const o=e.sourcePrefixLength||0,s=e.family||d.familyOf(e.ip),c=d.encode(e.ip,r.alloc),i=Math.ceil(o/8);t.writeUInt16BE(i+4,n),n+=2,t.writeUInt16BE(s,n),n+=2,t.writeUInt8(o,n++),t.writeUInt8(e.scopePrefixLength||0,n++),c.copy(t,n,0,i),n+=i;break;case 11:e.timeout?(t.writeUInt16BE(2,n),n+=2,t.writeUInt16BE(e.timeout,n),n+=2):(t.writeUInt16BE(0,n),n+=2);break;case 12:const a=e.length||0;t.writeUInt16BE(a,n),n+=2,t.fill(0,n,n+a),n+=a;break;case 14:const u=2*e.tags.length;t.writeUInt16BE(u,n),n+=2;for(const r of e.tags)t.writeUInt16BE(r,n),n+=2;break;default:throw new Error(`Unknown roption code: ${e.code}`)}return N.encode.bytes=n-o,t},N.encode.bytes=0,N.decode=function(e,t){t||(t=0);const n={};n.code=e.readUInt16BE(t),n.type=a.toString(n.code),t+=2;const o=e.readUInt16BE(t);switch(t+=2,n.data=e.slice(t,t+o),n.code){case 8:n.family=e.readUInt16BE(t),t+=2,n.sourcePrefixLength=e.readUInt8(t++),n.scopePrefixLength=e.readUInt8(t++);const s=r.alloc(1===n.family?4:16);e.copy(s,0,t,t+o-4),n.ip=d.decode(s);break;case 11:o>0&&(n.timeout=e.readUInt16BE(t),t+=2);break;case 14:n.tags=[];for(let r=0;r<o;r+=2)n.tags.push(e.readUInt16BE(t)),t+=2}return N.decode.bytes=o+4,n},N.decode.bytes=0,N.encodingLength=function(e){if(e.data)return e.data.length+4;const t=a.toCode(e.code);switch(t){case 8:const t=e.sourcePrefixLength||0;return Math.ceil(t/8)+8;case 11:return"number"===typeof e.timeout?6:4;case 12:return e.length+4;case 14:return 4+2*e.tags.length}throw new Error(`Unknown roption code: ${e.code}`)};const R=t.opt={};R.encode=function(e,t,n){t||(t=r.alloc(R.encodingLength(e))),n||(n=0);const o=n,s=K(e,N);return t.writeUInt16BE(s,n),n=H(e,N,t,n+2),R.encode.bytes=n-o,t},R.encode.bytes=0,R.decode=function(e,t){t||(t=0);const n=t,r=[];let o=e.readUInt16BE(t);t+=2;let s=0;while(o>0)r[s++]=N.decode(e,t),t+=N.decode.bytes,o-=N.decode.bytes;return R.decode.bytes=t-n,r},R.decode.bytes=0,R.encodingLength=function(e){return 2+K(e||[],N)};const D=t.dnskey={};D.PROTOCOL_DNSSEC=3,D.ZONE_KEY=128,D.SECURE_ENTRYPOINT=32768,D.encode=function(e,t,n){t||(t=r.alloc(D.encodingLength(e))),n||(n=0);const o=n,s=e.key;if(!r.isBuffer(s))throw new Error("Key must be a Buffer");return n+=2,t.writeUInt16BE(e.flags,n),n+=2,t.writeUInt8(D.PROTOCOL_DNSSEC,n),n+=1,t.writeUInt8(e.algorithm,n),n+=1,s.copy(t,n,0,s.length),n+=s.length,D.encode.bytes=n-o,t.writeUInt16BE(D.encode.bytes-2,o),t},D.encode.bytes=0,D.decode=function(e,t){t||(t=0);const n=t;var r={},o=e.readUInt16BE(t);if(t+=2,r.flags=e.readUInt16BE(t),t+=2,e.readUInt8(t)!==D.PROTOCOL_DNSSEC)throw new Error("Protocol must be 3");return t+=1,r.algorithm=e.readUInt8(t),t+=1,r.key=e.slice(t,n+o+2),t+=r.key.length,D.decode.bytes=t-n,r},D.decode.bytes=0,D.encodingLength=function(e){return 6+r.byteLength(e.key)};const M=t.rrsig={};M.encode=function(e,t,n){t||(t=r.alloc(M.encodingLength(e))),n||(n=0);const s=n,c=e.signature;if(!r.isBuffer(c))throw new Error("Signature must be a Buffer");return n+=2,t.writeUInt16BE(o.toType(e.typeCovered),n),n+=2,t.writeUInt8(e.algorithm,n),n+=1,t.writeUInt8(e.labels,n),n+=1,t.writeUInt32BE(e.originalTTL,n),n+=4,t.writeUInt32BE(e.expiration,n),n+=4,t.writeUInt32BE(e.inception,n),n+=4,t.writeUInt16BE(e.keyTag,n),n+=2,y.encode(e.signersName,t,n),n+=y.encode.bytes,c.copy(t,n,0,c.length),n+=c.length,M.encode.bytes=n-s,t.writeUInt16BE(M.encode.bytes-2,s),t},M.encode.bytes=0,M.decode=function(e,t){t||(t=0);const n=t;var r={},s=e.readUInt16BE(t);return t+=2,r.typeCovered=o.toString(e.readUInt16BE(t)),t+=2,r.algorithm=e.readUInt8(t),t+=1,r.labels=e.readUInt8(t),t+=1,r.originalTTL=e.readUInt32BE(t),t+=4,r.expiration=e.readUInt32BE(t),t+=4,r.inception=e.readUInt32BE(t),t+=4,r.keyTag=e.readUInt16BE(t),t+=2,r.signersName=y.decode(e,t),t+=y.decode.bytes,r.signature=e.slice(t,n+s+2),t+=r.signature.length,M.decode.bytes=t-n,r},M.decode.bytes=0,M.encodingLength=function(e){return 20+y.encodingLength(e.signersName)+r.byteLength(e.signature)};const q=t.rp={};q.encode=function(e,t,n){t||(t=r.alloc(q.encodingLength(e))),n||(n=0);const o=n;return n+=2,y.encode(e.mbox||".",t,n),n+=y.encode.bytes,y.encode(e.txt||".",t,n),n+=y.encode.bytes,q.encode.bytes=n-o,t.writeUInt16BE(q.encode.bytes-2,o),t},q.encode.bytes=0,q.decode=function(e,t){t||(t=0);const n=t,r={};return t+=2,r.mbox=y.decode(e,t)||".",t+=y.decode.bytes,r.txt=y.decode(e,t)||".",t+=y.decode.bytes,q.decode.bytes=t-n,r},q.decode.bytes=0,q.encodingLength=function(e){return 2+y.encodingLength(e.mbox||".")+y.encodingLength(e.txt||".")};const x={encode:function(e,t,n){t||(t=r.alloc(x.encodingLength(e))),n||(n=0);const s=n;for(var c=[],i=0;i<e.length;i++){var a=o.toType(e[i]);void 0===c[a>>8]&&(c[a>>8]=[]),c[a>>8][a>>3&31]|=1<<7-(7&a)}for(i=0;i<c.length;i++)if(void 0!==c[i]){var d=r.from(c[i]);t.writeUInt8(i,n),n+=1,t.writeUInt8(d.length,n),n+=1,d.copy(t,n),n+=d.length}return x.encode.bytes=n-s,t}};x.encode.bytes=0,x.decode=function(e,t,n){t||(t=0);const r=t;var s=[];while(t-r<n){var c=e.readUInt8(t);t+=1;var i=e.readUInt8(t);t+=1;for(var a=0;a<i;a++)for(var d=e.readUInt8(t+a),u=0;u<8;u++)if(d&1<<7-u){var l=o.toString(c<<8|a<<3|u);s.push(l)}t+=i}return x.decode.bytes=t-r,s},x.decode.bytes=0,x.encodingLength=function(e){for(var t=[],n=0;n<e.length;n++){var r=o.toType(e[n]);t[r>>8]=Math.max(t[r>>8]||0,255&r)}var s=0;for(n=0;n<t.length;n++)void 0!==t[n]&&(s+=2+Math.ceil((t[n]+1)/8));return s};const k=t.nsec={};k.encode=function(e,t,n){t||(t=r.alloc(k.encodingLength(e))),n||(n=0);const o=n;return n+=2,y.encode(e.nextDomain,t,n),n+=y.encode.bytes,x.encode(e.rrtypes,t,n),n+=x.encode.bytes,k.encode.bytes=n-o,t.writeUInt16BE(k.encode.bytes-2,o),t},k.encode.bytes=0,k.decode=function(e,t){t||(t=0);const n=t;var r={},o=e.readUInt16BE(t);return t+=2,r.nextDomain=y.decode(e,t),t+=y.decode.bytes,r.rrtypes=x.decode(e,t,o-(t-n)),t+=x.decode.bytes,k.decode.bytes=t-n,r},k.decode.bytes=0,k.encodingLength=function(e){return 2+y.encodingLength(e.nextDomain)+x.encodingLength(e.rrtypes)};const $=t.nsec3={};$.encode=function(e,t,n){t||(t=r.alloc($.encodingLength(e))),n||(n=0);const o=n,s=e.salt;if(!r.isBuffer(s))throw new Error("salt must be a Buffer");const c=e.nextDomain;if(!r.isBuffer(c))throw new Error("nextDomain must be a Buffer");return n+=2,t.writeUInt8(e.algorithm,n),n+=1,t.writeUInt8(e.flags,n),n+=1,t.writeUInt16BE(e.iterations,n),n+=2,t.writeUInt8(s.length,n),n+=1,s.copy(t,n,0,s.length),n+=s.length,t.writeUInt8(c.length,n),n+=1,c.copy(t,n,0,c.length),n+=c.length,x.encode(e.rrtypes,t,n),n+=x.encode.bytes,$.encode.bytes=n-o,t.writeUInt16BE($.encode.bytes-2,o),t},$.encode.bytes=0,$.decode=function(e,t){t||(t=0);const n=t;var r={},o=e.readUInt16BE(t);t+=2,r.algorithm=e.readUInt8(t),t+=1,r.flags=e.readUInt8(t),t+=1,r.iterations=e.readUInt16BE(t),t+=2;const s=e.readUInt8(t);t+=1,r.salt=e.slice(t,t+s),t+=s;const c=e.readUInt8(t);return t+=1,r.nextDomain=e.slice(t,t+c),t+=c,r.rrtypes=x.decode(e,t,o-(t-n)),t+=x.decode.bytes,$.decode.bytes=t-n,r},$.decode.bytes=0,$.encodingLength=function(e){return 8+e.salt.length+e.nextDomain.length+x.encodingLength(e.rrtypes)};const X=t.ds={};X.encode=function(e,t,n){t||(t=r.alloc(X.encodingLength(e))),n||(n=0);const o=n,s=e.digest;if(!r.isBuffer(s))throw new Error("Digest must be a Buffer");return n+=2,t.writeUInt16BE(e.keyTag,n),n+=2,t.writeUInt8(e.algorithm,n),n+=1,t.writeUInt8(e.digestType,n),n+=1,s.copy(t,n,0,s.length),n+=s.length,X.encode.bytes=n-o,t.writeUInt16BE(X.encode.bytes-2,o),t},X.encode.bytes=0,X.decode=function(e,t){t||(t=0);const n=t;var r={},o=e.readUInt16BE(t);return t+=2,r.keyTag=e.readUInt16BE(t),t+=2,r.algorithm=e.readUInt8(t),t+=1,r.digestType=e.readUInt8(t),t+=1,r.digest=e.slice(t,n+o+2),t+=r.digest.length,X.decode.bytes=t-n,r},X.decode.bytes=0,X.encodingLength=function(e){return 6+r.byteLength(e.digest)};const Y=t.record=function(e){switch(e.toUpperCase()){case"A":return v;case"PTR":return L;case"CNAME":return T;case"DNAME":return C;case"TXT":return U;case"NULL":return _;case"AAAA":return P;case"SRV":return O;case"HINFO":return A;case"CAA":return S;case"NS":return b;case"SOA":return w;case"MX":return B;case"OPT":return R;case"DNSKEY":return D;case"RRSIG":return M;case"RP":return q;case"NSEC":return k;case"NSEC3":return $;case"DS":return X}return m},F=t.answer={};F.encode=function(e,t,n){t||(t=r.alloc(F.encodingLength(e))),n||(n=0);const s=n;if(y.encode(e.name,t,n),n+=y.encode.bytes,t.writeUInt16BE(o.toType(e.type),n),"OPT"===e.type.toUpperCase()){if("."!==e.name)throw new Error("OPT name must be root.");t.writeUInt16BE(e.udpPayloadSize||4096,n+2),t.writeUInt8(e.extendedRcode||0,n+4),t.writeUInt8(e.ednsVersion||0,n+5),t.writeUInt16BE(e.flags||0,n+6),n+=8,R.encode(e.options||[],t,n),n+=R.encode.bytes}else{let r=i.toClass(void 0===e.class?"IN":e.class);e.flush&&(r|=f),t.writeUInt16BE(r,n+2),t.writeUInt32BE(e.ttl||0,n+4),n+=8;const o=Y(e.type);o.encode(e.data,t,n),n+=o.encode.bytes}return F.encode.bytes=n-s,t},F.encode.bytes=0,F.decode=function(e,t){t||(t=0);const n={},r=t;if(n.name=y.decode(e,t),t+=y.decode.bytes,n.type=o.toString(e.readUInt16BE(t)),"OPT"===n.type)n.udpPayloadSize=e.readUInt16BE(t+2),n.extendedRcode=e.readUInt8(t+4),n.ednsVersion=e.readUInt8(t+5),n.flags=e.readUInt16BE(t+6),n.flag_do=1===(n.flags>>15&1),n.options=R.decode(e,t+8),t+=8+R.decode.bytes;else{const r=e.readUInt16BE(t+2);n.ttl=e.readUInt32BE(t+4),n.class=i.toString(r&h),n.flush=!!(r&f);const o=Y(n.type);n.data=o.decode(e,t+8),t+=8+o.decode.bytes}return F.decode.bytes=t-r,n},F.decode.bytes=0,F.encodingLength=function(e){const t=null!==e.data&&void 0!==e.data?e.data:e.options;return y.encodingLength(e.name)+8+Y(e.type).encodingLength(t)};const V=t.question={};function K(e,t){let n=0;for(let r=0;r<e.length;r++)n+=t.encodingLength(e[r]);return n}function H(e,t,n,r){for(let o=0;o<e.length;o++)t.encode(e[o],n,r),r+=t.encode.bytes;return r}function Q(e,t,n,r){for(let o=0;o<e.length;o++)e[o]=t.decode(n,r),r+=t.decode.bytes;return r}V.encode=function(e,t,n){t||(t=r.alloc(V.encodingLength(e))),n||(n=0);const s=n;return y.encode(e.name,t,n),n+=y.encode.bytes,t.writeUInt16BE(o.toType(e.type),n),n+=2,t.writeUInt16BE(i.toClass(void 0===e.class?"IN":e.class),n),n+=2,V.encode.bytes=n-s,e},V.encode.bytes=0,V.decode=function(e,t){t||(t=0);const n=t,r={};r.name=y.decode(e,t),t+=y.decode.bytes,r.type=o.toString(e.readUInt16BE(t)),t+=2,r.class=i.toString(e.readUInt16BE(t)),t+=2;const s=!!(r.class&g);return s&&(r.class&=p),V.decode.bytes=t-n,r},V.decode.bytes=0,V.encodingLength=function(e){return y.encodingLength(e.name)+4},t.AUTHORITATIVE_ANSWER=1024,t.TRUNCATED_RESPONSE=512,t.RECURSION_DESIRED=256,t.RECURSION_AVAILABLE=128,t.AUTHENTIC_DATA=32,t.CHECKING_DISABLED=16,t.DNSSEC_OK=32768,t.encode=function(e,n,o){const s=!n;s&&(n=r.alloc(t.encodingLength(e))),o||(o=0);const c=o;return e.questions||(e.questions=[]),e.answers||(e.answers=[]),e.authorities||(e.authorities=[]),e.additionals||(e.additionals=[]),I.encode(e,n,o),o+=I.encode.bytes,o=H(e.questions,V,n,o),o=H(e.answers,F,n,o),o=H(e.authorities,F,n,o),o=H(e.additionals,F,n,o),t.encode.bytes=o-c,s&&t.encode.bytes!==n.length?n.slice(0,t.encode.bytes):n},t.encode.bytes=0,t.decode=function(e,n){n||(n=0);const r=n,o=I.decode(e,n);return n+=I.decode.bytes,n=Q(o.questions,V,e,n),n=Q(o.answers,F,e,n),n=Q(o.authorities,F,e,n),n=Q(o.additionals,F,e,n),t.decode.bytes=n-r,o},t.decode.bytes=0,t.encodingLength=function(e){return I.encodingLength(e)+K(e.questions||[],V)+K(e.answers||[],F)+K(e.authorities||[],F)+K(e.additionals||[],F)},t.streamEncode=function(e){const n=t.encode(e),o=r.alloc(2);o.writeUInt16BE(n.byteLength);const s=r.concat([o,n]);return t.streamEncode.bytes=s.byteLength,s},t.streamEncode.bytes=0,t.streamDecode=function(e){const n=e.readUInt16BE(0);if(e.byteLength<n+2)return null;const r=t.decode(e.slice(2));return t.streamDecode.bytes=t.decode.bytes,r},t.streamDecode.bytes=0},76942:function(e,t){"use strict";t.toString=function(e){switch(e){case 0:return"QUERY";case 1:return"IQUERY";case 2:return"STATUS";case 3:return"OPCODE_3";case 4:return"NOTIFY";case 5:return"UPDATE";case 6:return"OPCODE_6";case 7:return"OPCODE_7";case 8:return"OPCODE_8";case 9:return"OPCODE_9";case 10:return"OPCODE_10";case 11:return"OPCODE_11";case 12:return"OPCODE_12";case 13:return"OPCODE_13";case 14:return"OPCODE_14";case 15:return"OPCODE_15"}return"OPCODE_"+e},t.toOpcode=function(e){switch(e.toUpperCase()){case"QUERY":return 0;case"IQUERY":return 1;case"STATUS":return 2;case"OPCODE_3":return 3;case"NOTIFY":return 4;case"UPDATE":return 5;case"OPCODE_6":return 6;case"OPCODE_7":return 7;case"OPCODE_8":return 8;case"OPCODE_9":return 9;case"OPCODE_10":return 10;case"OPCODE_11":return 11;case"OPCODE_12":return 12;case"OPCODE_13":return 13;case"OPCODE_14":return 14;case"OPCODE_15":return 15}return 0}},96285:function(e,t){"use strict";t.toString=function(e){switch(e){case 1:return"LLQ";case 2:return"UL";case 3:return"NSID";case 5:return"DAU";case 6:return"DHU";case 7:return"N3U";case 8:return"CLIENT_SUBNET";case 9:return"EXPIRE";case 10:return"COOKIE";case 11:return"TCP_KEEPALIVE";case 12:return"PADDING";case 13:return"CHAIN";case 14:return"KEY_TAG";case 26946:return"DEVICEID"}return e<0?null:`OPTION_${e}`},t.toCode=function(e){if("number"===typeof e)return e;if(!e)return-1;switch(e.toUpperCase()){case"OPTION_0":return 0;case"LLQ":return 1;case"UL":return 2;case"NSID":return 3;case"OPTION_4":return 4;case"DAU":return 5;case"DHU":return 6;case"N3U":return 7;case"CLIENT_SUBNET":return 8;case"EXPIRE":return 9;case"COOKIE":return 10;case"TCP_KEEPALIVE":return 11;case"PADDING":return 12;case"CHAIN":return 13;case"KEY_TAG":return 14;case"DEVICEID":return 26946;case"OPTION_65535":return 65535}const t=e.match(/_(\d+)$/);return t?parseInt(t[1],10):-1}},46017:function(e,t){"use strict";t.toString=function(e){switch(e){case 0:return"NOERROR";case 1:return"FORMERR";case 2:return"SERVFAIL";case 3:return"NXDOMAIN";case 4:return"NOTIMP";case 5:return"REFUSED";case 6:return"YXDOMAIN";case 7:return"YXRRSET";case 8:return"NXRRSET";case 9:return"NOTAUTH";case 10:return"NOTZONE";case 11:return"RCODE_11";case 12:return"RCODE_12";case 13:return"RCODE_13";case 14:return"RCODE_14";case 15:return"RCODE_15"}return"RCODE_"+e},t.toRcode=function(e){switch(e.toUpperCase()){case"NOERROR":return 0;case"FORMERR":return 1;case"SERVFAIL":return 2;case"NXDOMAIN":return 3;case"NOTIMP":return 4;case"REFUSED":return 5;case"YXDOMAIN":return 6;case"YXRRSET":return 7;case"NXRRSET":return 8;case"NOTAUTH":return 9;case"NOTZONE":return 10;case"RCODE_11":return 11;case"RCODE_12":return 12;case"RCODE_13":return 13;case"RCODE_14":return 14;case"RCODE_15":return 15}return 0}},9082:function(e,t){"use strict";t.toString=function(e){switch(e){case 1:return"A";case 10:return"NULL";case 28:return"AAAA";case 18:return"AFSDB";case 42:return"APL";case 257:return"CAA";case 60:return"CDNSKEY";case 59:return"CDS";case 37:return"CERT";case 5:return"CNAME";case 49:return"DHCID";case 32769:return"DLV";case 39:return"DNAME";case 48:return"DNSKEY";case 43:return"DS";case 55:return"HIP";case 13:return"HINFO";case 45:return"IPSECKEY";case 25:return"KEY";case 36:return"KX";case 29:return"LOC";case 15:return"MX";case 35:return"NAPTR";case 2:return"NS";case 47:return"NSEC";case 50:return"NSEC3";case 51:return"NSEC3PARAM";case 12:return"PTR";case 46:return"RRSIG";case 17:return"RP";case 24:return"SIG";case 6:return"SOA";case 99:return"SPF";case 33:return"SRV";case 44:return"SSHFP";case 32768:return"TA";case 249:return"TKEY";case 52:return"TLSA";case 250:return"TSIG";case 16:return"TXT";case 252:return"AXFR";case 251:return"IXFR";case 41:return"OPT";case 255:return"ANY"}return"UNKNOWN_"+e},t.toType=function(e){switch(e.toUpperCase()){case"A":return 1;case"NULL":return 10;case"AAAA":return 28;case"AFSDB":return 18;case"APL":return 42;case"CAA":return 257;case"CDNSKEY":return 60;case"CDS":return 59;case"CERT":return 37;case"CNAME":return 5;case"DHCID":return 49;case"DLV":return 32769;case"DNAME":return 39;case"DNSKEY":return 48;case"DS":return 43;case"HIP":return 55;case"HINFO":return 13;case"IPSECKEY":return 45;case"KEY":return 25;case"KX":return 36;case"LOC":return 29;case"MX":return 15;case"NAPTR":return 35;case"NS":return 2;case"NSEC":return 47;case"NSEC3":return 50;case"NSEC3PARAM":return 51;case"PTR":return 12;case"RRSIG":return 46;case"RP":return 17;case"SIG":return 24;case"SOA":return 6;case"SPF":return 99;case"SRV":return 33;case"SSHFP":return 44;case"TA":return 32768;case"TKEY":return 249;case"TLSA":return 52;case"TSIG":return 250;case"TXT":return 16;case"AXFR":return 252;case"IXFR":return 251;case"OPT":return 41;case"ANY":return 255;case"*":return 255}return e.toUpperCase().startsWith("UNKNOWN_")?parseInt(e.slice(8)):0}},79831:function(e,t){"use strict";t.SERVICE_TAG="_ipfs-discovery._udp",t.SERVICE_TAG_LOCAL=`${t.SERVICE_TAG}.local`,t.MULTICAST_IP="224.0.0.251",t.MULTICAST_PORT=5353},49476:function(e,t,n){"use strict";const r=n(17187),o=n(38326),s=n(32976);class c extends r{constructor({peerId:e,multiaddrs:t,queryPeriod:n,queryInterval:r}){super(),this._started=!1,this._peerId=e,this._multiaddrs=t,this._queryPeriod=n,this._queryInterval=r,this._onPeer=this._onPeer.bind(this)}async start(){this._started||(this._started=!0,this._responder=new o({peerId:this._peerId,multiaddrs:this._multiaddrs}),this._querier=new s({peerId:this._peerId,queryInterval:this._queryInterval,queryPeriod:this._queryPeriod}),this._querier.on("peer",this._onPeer),await Promise.all([this._responder.start(),this._querier.start()]))}_onPeer(e){this.emit("peer",e)}stop(){if(!this._started)return;const e=this._responder,t=this._querier;return this._started=!1,this._responder=null,this._querier=null,t.removeListener("peer",this._onPeer),Promise.all([e.stop(),t.stop()])}}e.exports=c},32976:function(e,t,n){"use strict";const r=n(17187),o=n(59040),{Multiaddr:s}=n(46584),c=n(88785),i=n(11227),a=i("libp2p:mdns:compat:querier");a.error=i("libp2p:mdns:compat:querier:error");const{SERVICE_TAG_LOCAL:d,MULTICAST_IP:u,MULTICAST_PORT:l}=n(79831);class f extends r{constructor({peerId:e,queryInterval:t=6e4,queryPeriod:n}){if(super(),!e)throw new Error("missing peerId parameter");this._peerIdStr=e.toB58String(),this._options={queryInterval:t,queryPeriod:Math.min(t,null==n?5e3:n)},this._onResponse=this._onResponse.bind(this)}start(){this._handle=h((()=>{const e=o({multicast:!1,interface:"0.0.0.0",port:0});return e.on("response",this._onResponse),e.query({id:g(),questions:[{name:d,type:"PTR",class:"IN"}]},null,{address:u,port:l}),{stop:()=>(e.removeListener("response",this._onResponse),new Promise((t=>e.destroy(t))))}}),{period:this._options.queryPeriod,interval:this._options.queryInterval})}_onResponse(e,t){const n=e.answers||[],r=n.find((e=>"PTR"===e.type&&e.name===d));if(!r)return;a("got response",e,t);const o=n.find((e=>"TXT"===e.type));if(!o)return a("missing TXT record in response");let i,u;try{i=o.data[0].toString()}catch(p){return a("failed to extract peer ID from TXT record data",o,p)}if(this._peerIdStr===i)return a("ignoring reply to myself");try{u=c.createFromB58String(i)}catch(p){return a("failed to create peer ID from TXT record data",i,p)}const l=n.find((e=>"SRV"===e.type));if(!l)return a("missing SRV record in response");a("peer found",i);const{port:f}=l.data||{},h={A:"ip4",AAAA:"ip6"},g=n.filter((e=>["A","AAAA"].includes(e.type))).reduce(((e,t)=>{const n=`/${h[t.type]}/${t.data}/tcp/${f}`;try{e.push(new s(n)),a(n)}catch(p){a(`failed to create multiaddr from ${t.type} record data`,n,f,p)}return e}),[]);this.emit("peer",{id:u,multiaddrs:g})}stop(){return this._handle.stop()}}function h(e,t){let n,r,o=!1;const s=()=>{n=e(),r=setTimeout((async()=>{await n.stop().catch(a),o||(r=setTimeout(s,t.interval)),n=null}),t.period)};return s(),{stop(){if(o=!0,clearTimeout(r),n)return n.stop()}}}e.exports=f;const g=(()=>{let e=0;return()=>(e++,e===Number.MAX_SAFE_INTEGER&&(e=1),e)})()},38326:function(e,t,n){"use strict";var r=n(48764)["Buffer"];const o=n(67435),s=n(59040),c=n(11227)("libp2p:mdns:compat:responder"),{SERVICE_TAG_LOCAL:i}=n(79831);class a{constructor({peerId:e,multiaddrs:t}){if(!e)throw new Error("missing peerId parameter");this._peerId=e,this._peerIdStr=e.toB58String(),this._multiaddrs=t,this._onQuery=this._onQuery.bind(this)}start(){this._mdns=s(),this._mdns.on("query",this._onQuery)}_onQuery(e,t){const n=this._multiaddrs.reduce(((e,t)=>(t.isThinWaistAddress()&&e.push(t.toOptions()),e)),[]);if(!n.length)return;const s=e.questions||[];if(!s.some((e=>e.name===i)))return;c("got query",e,t);const a=[],d=`${this._peerIdStr}.${i}`;a.push({name:i,type:"PTR",class:"IN",ttl:120,data:d});const u=n[0].port;a.push({name:d,type:"SRV",class:"IN",ttl:120,data:{priority:10,weight:1,port:u,target:o.hostname()}}),a.push({name:d,type:"TXT",class:"IN",ttl:120,data:[r.from(this._peerIdStr)]}),n.forEach((e=>{[4,6].includes(e.family)&&a.push({name:o.hostname(),type:4===e.family?"A":"AAAA",class:"IN",ttl:120,data:e.host})})),c("responding to query",a),this._mdns.respond(a,t)}stop(){return this._mdns.removeListener("query",this._onQuery),new Promise((e=>this._mdns.destroy(e)))}}e.exports=a},81474:function(e,t,n){"use strict";const r=n(59040),{EventEmitter:o}=n(17187),s=n(11227),c=s("libp2p:mdns"),i=n(12073),a=n(49476);class d extends o{constructor(e={}){if(super(),!e.peerId)throw new Error("needs own PeerId to work");this.broadcast=!1!==e.broadcast,this.interval=e.interval||1e4,this.serviceTag=e.serviceTag||"ipfs.local",this.port=e.port||5353,this.peerId=e.peerId,this.peerMultiaddrs=e.libp2p.multiaddrs||[],this._queryInterval=null,this._onPeer=this._onPeer.bind(this),this._onMdnsQuery=this._onMdnsQuery.bind(this),this._onMdnsResponse=this._onMdnsResponse.bind(this),!1!==e.compat&&(this._goMdns=new a({multiaddrs:this.peerMultiaddrs,peerId:e.peerId,queryPeriod:e.compatQueryPeriod,queryInterval:e.compatQueryInterval}),this._goMdns.on("peer",this._onPeer))}async start(){this.mdns||(this.mdns=r({port:this.port}),this.mdns.on("query",this._onMdnsQuery),this.mdns.on("response",this._onMdnsResponse),this._queryInterval=i.queryLAN(this.mdns,this.serviceTag,this.interval),this._goMdns&&await this._goMdns.start())}_onMdnsQuery(e){i.gotQuery(e,this.mdns,this.peerId,this.peerMultiaddrs,this.serviceTag,this.broadcast)}_onMdnsResponse(e){try{const t=i.gotResponse(e,this.peerId,this.serviceTag);t&&this.emit("peer",t)}catch(t){c("Error processing peer response",t)}}_onPeer(e){this.mdns&&this.emit("peer",e)}async stop(){this.mdns&&(this.mdns.removeListener("query",this._onMdnsQuery),this.mdns.removeListener("response",this._onMdnsResponse),this._goMdns&&this._goMdns.removeListener("peer",this._onPeer),clearInterval(this._queryInterval),this._queryInterval=null,await Promise.all([this._goMdns&&this._goMdns.stop(),new Promise((e=>this.mdns.destroy(e)))]),this.mdns=void 0)}}t=e.exports=d,t.tag="mdns"},12073:function(e,t,n){"use strict";const r=n(67435),o=n(11227),s=o("libp2p:mdns");s.error=o("libp2p:mdns:error");const{Multiaddr:c}=n(46584),i=n(88785);e.exports={queryLAN:function(e,t,n){const r=()=>{s("query",t),e.query({questions:[{name:t,type:"PTR"}]})};return r(),setInterval(r,n)},gotResponse:function(e,t,n){if(!e.answers)return;const r={ptr:{},srv:{},txt:{},a:[],aaaa:[]};if(e.answers.forEach((e=>{switch(e.type){case"PTR":r.ptr=e;break;case"SRV":r.srv=e;break;case"TXT":r.txt=e;break;case"A":r.a.push(e);break;case"AAAA":r.aaaa.push(e);break;default:break}})),r.ptr.name!==n)return;const o=r.txt.data[0].toString(),a=r.srv.data.port,d=[];return r.a.forEach((e=>{const t=new c("/ip4/"+e.data+"/tcp/"+a);d.some((e=>e.equals(t)))||d.push(t)})),r.aaaa.forEach((e=>{const t=new c("/ip6/"+e.data+"/tcp/"+a);d.some((e=>e.equals(t)))||d.push(t)})),t.toB58String()!==o?(s("peer found -",o),{id:i.createFromB58String(o),multiaddrs:d}):void 0},gotQuery:function(e,t,n,o,c,i){if(!i)return;const a=o.reduce(((e,t)=>(t.isThinWaistAddress()&&e.push(t.toOptions()),e)),[]);if(0!==a.length&&e.questions[0]&&e.questions[0].name===c){const e=[];e.push({name:c,type:"PTR",class:"IN",ttl:120,data:n.toB58String()+"."+c});const o=a[0].port;e.push({name:n.toB58String()+"."+c,type:"SRV",class:"IN",ttl:120,data:{priority:10,weight:1,port:o,target:r.hostname()}}),e.push({name:n.toB58String()+"."+c,type:"TXT",class:"IN",ttl:120,data:n.toB58String()}),a.forEach((t=>{[4,6].includes(t.family)&&e.push({name:r.hostname(),type:4===t.family?"A":"AAAA",class:"IN",ttl:120,data:t.host})})),s("responding to query"),t.respond(e)}}}},2932:function(e,t){"use strict";t.CODE_P2P=421,t.CODE_CIRCUIT=290,t.CLOSE_TIMEOUT=2e3},52499:function(e,t,n){"use strict";const r=n(23059),o=n(29175),s=n(98514),c=n(32114),i=n(11227)("libp2p:tcp"),a=n(61408),d=n(45520),{multiaddrToNetConfig:u}=n(87760),{AbortError:l}=n(61623),{CODE_CIRCUIT:f,CODE_P2P:h}=n(2932);class g{constructor({upgrader:e}){if(!e)throw new Error("An upgrader must be provided. See https://github.com/libp2p/interface-transport#upgrader.");this._upgrader=e}async dial(e,t){t=t||{};const n=await this._connect(e,t),r=a(n,{remoteAddr:e,signal:t.signal});i("new outbound connection %s",r.remoteAddr);const o=await this._upgrader.upgradeOutbound(r);return i("outbound connection %s upgraded",r.remoteAddr),o}_connect(e,t={}){if(t.signal&&t.signal.aborted)throw new l;return new Promise(((n,o)=>{const s=Date.now(),a=u(e);i("dialing %j",a);const d=r.connect(a),f=e=>{e.message=`connection error ${a.host}:${a.port}: ${e.message}`,y(e)},h=()=>{i("connection timeout %s:%s",a.host,a.port);const e=c(new Error(`connection timeout after ${Date.now()-s}ms`),"ERR_CONNECT_TIMEOUT");d.emit("error",e)},g=()=>{i("connection opened %j",a),y()},p=()=>{i("connection aborted %j",a),d.destroy(),y(new l)},y=e=>{if(d.removeListener("error",f),d.removeListener("timeout",h),d.removeListener("connect",g),t.signal&&t.signal.removeEventListener("abort",p),e)return o(e);n(d)};d.on("error",f),d.on("timeout",h),d.on("connect",g),t.signal&&t.signal.addEventListener("abort",p)}))}createListener(e,t){let n;return"function"===typeof e?(n=e,e={}):n=t,e=e||{},d({handler:n,upgrader:this._upgrader},e)}filter(e){return e=Array.isArray(e)?e:[e],e.filter((e=>!e.protoCodes().includes(f)&&o.TCP.matches(e.decapsulateCode(h))))}}const p=s(g,{className:"TCP",symbolName:"@libp2p/js-libp2p-tcp/tcp"});e.exports=p},45520:function(e,t,n){"use strict";const r=n(23059),o=n(17187),s=n(11227),c=Object.assign(s("libp2p:tcp:listener"),{error:s("libp2p:tcp:listener:error")}),i=n(61408),{CODE_P2P:a}=n(2932),{getMultiaddrs:d,multiaddrToNetConfig:u}=n(87760);async function l(e){try{e&&await e.close()}catch(t){c.error("an error occurred closing the connection",t)}}function f(e,t){e.__connections.push(t);const n=()=>{e.__connections=e.__connections.filter((e=>e!==t))};t.conn.once("close",n)}e.exports=({handler:e,upgrader:t},n)=>{let s,h,g;const p=Object.assign(new o,{getAddrs:()=>{let e=[];const t=s.address();if(!t)throw new Error("Listener is not ready yet");return g.toString().startsWith("/ip4")?e=e.concat(d("ip4",t.address,t.port)):"IPv6"===t.family&&(e=e.concat(d("ip6",t.address,t.port))),e.map((e=>h?e.encapsulate(`/p2p/${h}`):e))},listen:async e=>(g=e,h=e.getPeerId(),h&&(g=e.decapsulateCode(a)),new Promise(((e,t)=>{const n=u(g);s.listen(n,(n=>{if(n)return t(n);c("Listening on %s",s.address()),e(void 0)}))}))),close:async()=>{if(s.listening)return new Promise(((e,t)=>{s.__connections.forEach((e=>l(e))),s.close((n=>n?t(n):e(void 0)))}))}});return s=Object.assign(r.createServer((async n=>{let r,o;n.on("error",(e=>c("socket error",e)));try{r=i(n,{listeningAddr:g}),c("new inbound connection %s",r.remoteAddr),o=await t.upgradeInbound(r)}catch(a){return c.error("inbound connection failed",a),l(r)}c("inbound connection %s upgraded",r.remoteAddr),f(s,r),e&&e(o),p.emit("connection",o)})),{__connections:[]}),s.on("listening",(()=>p.emit("listening"))).on("error",(e=>p.emit("error",e))).on("close",(()=>p.emit("close"))),p}},61408:function(e,t,n){"use strict";var r=n(48764)["Buffer"];const o=n(61623),s=n(11227)("libp2p:tcp:socket"),c=n(79407),i=n(489),{CLOSE_TIMEOUT:a}=n(2932),d=(e,t)=>{t=t||{},t.listeningAddr&&t.listeningAddr.getPath()&&(t.remoteAddr=t.listeningAddr),t.remoteAddr&&t.remoteAddr.getPath()&&(t.localAddr=t.remoteAddr);const{sink:n,source:d}=c.duplex(e),u={async sink(e){t.signal&&(e=o(e,t.signal));try{await n(async function*(){for await(const t of e)yield r.isBuffer(t)?t:t.slice()}())}catch(c){"aborted"!==c.type&&s(c)}},source:t.signal?o(d,t.signal):d,conn:e,localAddr:t.localAddr||i(e.localAddress,e.localPort),remoteAddr:t.remoteAddr||i(e.remoteAddress||"",e.remotePort||""),timeline:{open:Date.now()},async close(){if(!e.destroyed)return new Promise(((t,n)=>{const r=Date.now(),o=setTimeout((()=>{const{host:n,port:o}=u.remoteAddr.toOptions();s("timeout closing socket to %s:%s after %dms, destroying it manually",n,o,Date.now()-r),e.destroyed?s("%s:%s is already destroyed",n,o):e.destroy(),t()}),a);e.once("close",(()=>{clearTimeout(o),t()})),e.end((e=>{if(u.timeline.close=Date.now(),e)return n(e);t()}))}))}};return e.once("close",(()=>{u.timeline.close||(u.timeline.close=Date.now())})),u};e.exports=d},87760:function(e,t,n){"use strict";const{Multiaddr:r}=n(46584),o=n(67435),{resolve:s}=n(26470),c={ip4:"IPv4",ip6:"IPv6"};function i(e){const t=e.getPath();return t?s(t):e.toOptions()}function a(e,t,n){const o=t=>new r(`/${e}/${t}/tcp/${n}`);return(d(t)?l(c[e]):[t]).map(o)}function d(e){return["0.0.0.0","::"].includes(e)}const u=o.networkInterfaces();function l(e){const t=[];for(const[,n]of Object.entries(u))if(n)for(const r of n)r.family===e&&t.push(r.address);return t}e.exports={multiaddrToNetConfig:i,isAnyAddr:d,getMultiaddrs:a}},59040:function(e,t,n){var r=n(34155),o=n(64568),s=n(14863),c=n(53781),i=n(17187),a=n(67435),d=function(){};function u(){for(var e=a.networkInterfaces(),t=Object.keys(e),n=0;n<t.length;n++)for(var r=e[t[n]],o=0;o<r.length;o++){var s=r[o];if(f(s.family)&&!s.internal)return"darwin"===a.platform()&&"en0"===t[n]?s.address:"0.0.0.0"}return"127.0.0.1"}function l(){for(var e=a.networkInterfaces(),t=Object.keys(e),n=[],r=0;r<t.length;r++)for(var o=e[t[r]],s=0;s<o.length;s++){var c=o[s];if(f(c.family)){n.push(c.address);break}}return n}function f(e){return 4===e||"IPv4"===e}e.exports=function(e){e||(e={});var t=new i.EventEmitter,n="number"===typeof e.port?e.port:5353,a=e.type||"udp4",f=e.ip||e.host||("udp4"===a?"224.0.0.251":null),h={address:f,port:n},g={},p=!1,y=null;if("udp6"===a&&(!f||!e.interface))throw new Error("For IPv6 multicast you must specify `ip` and `interface`");var E=e.socket||s.createSocket({type:a,reuseAddr:!1!==e.reuseAddr,toString:function(){return a}});E.on("error",(function(e){"EACCES"===e.code||"EADDRINUSE"===e.code?t.emit("error",e):t.emit("warning",e)})),E.on("message",(function(e,n){try{e=o.decode(e)}catch(r){return void t.emit("warning",r)}t.emit("packet",e,n),"query"===e.type&&t.emit("query",e,n),"response"===e.type&&t.emit("response",e,n)})),E.on("listening",(function(){n||(n=h.port=E.address().port),!1!==e.multicast&&(t.update(),y=setInterval(t.update,5e3),E.setMulticastTTL(e.ttl||255),E.setMulticastLoopback(!1!==e.loopback))}));var I=c((function(t){if(!n||!1===e.bind)return t(null);E.once("error",t),E.bind(n,e.bind||e.interface,(function(){E.removeListener("error",t),t(null)}))}));return I((function(e){if(e)return t.emit("error",e);t.emit("ready")})),t.send=function(e,n,r){if("function"===typeof n)return t.send(e,null,n);function s(t){if(p)return r();if(t)return r(t);var s=o.encode(e);E.send(s,0,s.length,n.port,n.address||n.host,r)}r||(r=d),n?n.host||n.address||(n.address=h.address):n=h,I(s)},t.response=t.respond=function(e,n,r){Array.isArray(e)&&(e={answers:e}),e.type="response",e.flags=(e.flags||0)|o.AUTHORITATIVE_ANSWER,t.send(e,n,r)},t.query=function(e,n,r,o){return"function"===typeof n?t.query(e,null,null,n):"object"===typeof n&&n&&n.port?t.query(e,null,n,r):"function"===typeof r?t.query(e,n,null,r):(o||(o=d),"string"===typeof e&&(e=[{name:e,type:n||"ANY"}]),Array.isArray(e)&&(e={type:"query",questions:e}),e.type="query",void t.send(e,r,o))},t.destroy=function(e){if(e||(e=d),p)return r.nextTick(e);for(var t in p=!0,clearInterval(y),g)try{E.dropMembership(f,t)}catch(n){}g={},E.close(e)},t.update=function(){for(var n=e.interface?[].concat(e.interface):l(),r=!1,o=0;o<n.length;o++){var s=n[o];if(!g[s])try{E.addMembership(f,s),g[s]=!0,r=!0}catch(c){t.emit("warning",c)}}if(r){if(E.setMulticastInterface)try{E.setMulticastInterface(e.interface||u())}catch(c){t.emit("warning",c)}t.emit("networkInterface")}},t}},67435:function(e,t){t.endianness=function(){return"LE"},t.hostname=function(){return"undefined"!==typeof location?location.hostname:""},t.loadavg=function(){return[]},t.uptime=function(){return 0},t.freemem=function(){return Number.MAX_VALUE},t.totalmem=function(){return Number.MAX_VALUE},t.cpus=function(){return[]},t.type=function(){return"Browser"},t.release=function(){return"undefined"!==typeof navigator?navigator.appVersion:""},t.networkInterfaces=t.getNetworkInterfaces=function(){return{}},t.arch=function(){return"javascript"},t.platform=function(){return"browser"},t.tmpdir=t.tmpDir=function(){return"/tmp"},t.EOL="\n",t.homedir=function(){return"/"}},53781:function(e,t,n){"use strict";var r=n(34155),o=u;function s(e){var t=r;return n;function n(e){t(e||i)}function r(n){var s=[n];function i(e){s.push(e)}function d(e){var n=arguments;t=c(e)?r:i;while(s.length)i(s.shift());function i(e){o(a,e,n)}}t=i,e(d)}}function c(e){return"[object Error]"===Object.prototype.toString.call(e)}function i(){}function a(e,t){e.apply(null,t)}function d(e){42===e&&(o=r.nextTick)}function u(e,t,n){r.nextTick((function(){e(t,n)}))}r.nextTick(d,42),e.exports=s},23059:function(){},14863:function(){},69526:function(e,t){var n,r,o=function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.decode=l,e.encode=u,e.familyOf=d,e.name=void 0,e.sizeOf=a,e.v6=e.v4=void 0;const t=/^(\d{1,3}\.){3,3}\d{1,3}$/,n=4,r=/^(::)?(((\d{1,3}\.){3}(\d{1,3}){1})?([0-9a-f]){0,4}:{0,2}){1,8}(::)?$/i,o=16,s={name:"v4",size:n,isFormat:e=>t.test(e),encode(e,t,r){r=~~r,t=t||new Uint8Array(r+n);const o=e.length;let s=0;for(let n=0;n<o;){const o=e.charCodeAt(n++);46===o?(t[r++]=s,s=0):s=10*s+(o-48)}return t[r]=s,t},decode(e,t){return t=~~t,`${e[t++]}.${e[t++]}.${e[t++]}.${e[t]}`}};e.v4=s;const c={name:"v6",size:o,isFormat:e=>e.length>0&&r.test(e),encode(e,t,n){n=~~n;let r=n+o,s=-1,c=0,i=0,a=!0,d=!1;t=t||new Uint8Array(n+o);for(let o=0;o<e.length;o++){let u=e.charCodeAt(o);58===u?(a?-1!==s?(n<r&&(t[n]=0),n<r-1&&(t[n+1]=0),n+=2):n<r&&(s=n):(!0===d?(n<r&&(t[n]=i),n++):(n<r&&(t[n]=c>>8),n<r-1&&(t[n+1]=255&c),n+=2),c=0,i=0),a=!0,d=!1):46===u?(n<r&&(t[n]=i),n++,i=0,c=0,a=!1,d=!0):(a=!1,u>=97?u-=87:u>=65?u-=55:(u-=48,i=10*i+u),c=(c<<4)+u)}if(!1===a)!0===d?(n<r&&(t[n]=i),n++):(n<r&&(t[n]=c>>8),n<r-1&&(t[n+1]=255&c),n+=2);else if(0===s)n<r&&(t[n]=0),n<r-1&&(t[n+1]=0),n+=2;else if(-1!==s){n+=2;for(let e=Math.min(n-1,r-1);e>=s+2;e--)t[e]=t[e-2];t[s]=0,t[s+1]=0,s=n}if(s!==n&&-1!==s){n>r-2&&(n=r-2);while(r>s)t[--r]=n<r&&n>s?t[--n]:0}else while(n<r)t[n++]=0;return t},decode(e,t){t=~~t;let n="";for(let r=0;r<o;r+=2)0!==r&&(n+=":"),n+=(e[t+r]<<8|e[t+r+1]).toString(16);return n.replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3").replace(/:{3,4}/,"::")}};e.v6=c;const i="ip";function a(e){if(s.isFormat(e))return s.size;if(c.isFormat(e))return c.size;throw Error(`Invalid ip address: ${e}`)}function d(e){return a(e)===s.size?1:2}function u(e,t,n){n=~~n;const r=a(e);return"function"===typeof t&&(t=t(n+r)),r===s.size?s.encode(e,t,n):c.encode(e,t,n)}function l(e,t,n){if(t=~~t,n=n||e.length-t,n===s.size)return s.decode(e,t,n);if(n===c.size)return c.decode(e,t,n);throw Error(`Invalid buffer size needs to be ${s.size} for v4 or ${c.size} for v6.`)}return e.name=i,"default"in e?e.default:e}({});n=[],r=function(){return o}.apply(t,n),void 0===r||(e.exports=r)}}]);